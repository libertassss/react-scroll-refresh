!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):"object"==typeof exports?exports.scrollPullRefresh=t(require("react")):e.scrollPullRefresh=t(e.React)}(self,(function(e){return(()=>{"use strict";var t={572:(e,t,r)=>{r.d(t,{default:()=>s});var n=r(888),o=r.n(n);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var u={noBounce:2500,weekBounce:800,strongBounce:400},c={noBounce:"cubic-bezier(.17, .89, .45, 1)",weekBounce:"cubic-bezier(.25, .46, .45, .94)",strongBounce:"cubic-bezier(.25, .46, .45, .94)"};const s=function(e){var t=e.onRefresh,r=void 0===t?function(){}:t,a=e.refreshing,s=e.direction,f=e.distanceToRefresh,m=void 0===f?25:f,l=e.children,d=(0,n.useRef)(),h=(0,n.useRef)(),Y=i((0,n.useState)(),2),p=Y[0],v=Y[1],g=i((0,n.useState)(!1),2),b=g[0],y=g[1],T=i((0,n.useState)({duration:0,minY:0,maxY:0,pointY:0,momentumStartY:0,startY:0,offsetY:0,momentumTimeThreshold:300,momentumYThreshold:15,startTime:0,nowTime:0,bezier:"linear",wrapperHeight:0,_startScreenX:0,_startScreenY:0}),2),w=T[0],x=T[1];(0,n.useEffect)((function(){var e=d.current.getBoundingClientRect().height,t=h.current.getBoundingClientRect().height;return w.minY=e-t,w.wrapperHeight=e,h.current.addEventListener("transitionend",z),x(w),S}),[]);var S=function(){h.current.removeEventListener("transitionend",z),h.current.removeEventListener("touchstart",B),h.current.removeEventListener("touchmove",E),h.current.removeEventListener("touchcancel",R)},B=function(e){var t=e.changedTouches[0];j(),y(!0),w.pointY=t.pageY,w._startScreenY=t.screenY,w._startScreenX=t.screenX,w.startTime=(new Date).getTime(),w.duration=0,w.momentumStartY=w.startY=w.offsetY,x(w)},E=function(e){if(b){var t=e.changedTouches[0],r=(t.screenY,t.screenX);if(!(Math.abs(r-w._startScreenX)>20*window.devicePixelRatio)){var n=t.pageY-(w.pointY||0),o=Math.round((w.startY||0)+n);if((o<w.minY||o>w.maxY)&&(o=Math.round((w.startY||0)+n/3)),w.offsetY<w.minY-m||w.offsetY>m)o=Math.round((w.startY||0)+n/3);else{w.offsetY=o;var i=(new Date).getTime();i-(w.startTime||0)>w.momentumTimeThreshold&&(w.momentumStartY=w.offsetY,w.startTime=i),x(w),M(w)}}}},M=function(e){var t=e.offsetY,r=e.duration,n=e.bezier;v({transform:"translate3d(0, ".concat(t,"px, 0)"),transitionDuration:"".concat(r,"ms"),transitionTimingFunction:n})},R=function(e){if(b)if(y(!1),"up"===s&&w.offsetY<w.minY-m)r();else if("down"===s&&w.offsetY>m)r();else if(!z()){var t=Math.abs(w.offsetY-w.momentumStartY),n=(new Date).getTime()-w.startTime;if(n<w.momentumTimeThreshold&&t>w.momentumYThreshold){var o=C(w.offsetY,w.momentumStartY,n);w.offsetY=Math.round(o.destination),w.duration=o.duration,w.bezier=o.bezier,x(w),M(w)}}};(0,n.useEffect)((function(){a?j():z()}),[a]),(0,n.useEffect)((function(){var e=d.current.getBoundingClientRect().height,t=h.current.getBoundingClientRect().height;w.minY=e-t,w.wrapperHeight=e,x(w)}),[l]);var z=function(){var e;return w.offsetY<w.minY?e=w.minY:w.offsetY>w.maxY&&(e=w.maxY),void 0!==e&&(w.offsetY=e,w.duration=500,w.bezier="cubic-bezier(.165, .84, .44, 1)",x(w),M(w),!0)},j=function(){var e=window.getComputedStyle(h.current).getPropertyValue("transform");w.offsetY=Math.round(+e.split(")")[0].split(", ")[5]),x(w),M(w)},C=function(e,t,r){var n,o="noBounce",i=w.wrapperHeight/6,a=e-t,s=e+2*Math.abs(a)/r/.003*(a<0?-1:1);return s<w.minY?(o=(n=w.minY-s)>300?"strongBounce":"weekBounce",s=Math.max(w.minY-i,w.minY-n/10)):s>w.maxY&&(o=(n=s-w.maxY)>300?"strongBounce":"weekBounce",s=Math.min(w.maxY+i,w.maxY+n/10)),{destination:s,duration:u[o],bezier:c[o]}};return o().createElement("div",{className:"hp-box",ref:d,style:{height:"200px"}},"down"===s&&o().createElement("span",{className:"refresh-icon"},"刷新中....."),"up"===s&&o().createElement("span",{className:"loading-icon"},"加载中....."),o().createElement("div",{ref:h,style:p,onTouchStart:function(e){return B(e)},onTouchMove:function(e){return E(e)},onTouchCancel:function(e){return R(e)},onTouchEnd:function(e){return R(e)},className:"hp-wrapper"},l))}},888:t=>{t.exports=e}},r={};function n(e){if(r[e])return r[e].exports;var o=r[e]={exports:{}};return t[e](o,o.exports,n),o.exports}return n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n(572)})().default}));